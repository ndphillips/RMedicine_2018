<!DOCTYPE html>
<html>
  <head>
    <title>FFTrees</title>
    <meta charset="utf-8">
    <meta name="author" content="Yihui Xie" />
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/font-awesome-5.0.13/css/fa-svg-with-js.css" rel="stylesheet" />
    <script src="libs/font-awesome-5.0.13/js/fontawesome-all.min.js"></script>
    <script src="libs/font-awesome-5.0.13/js/fa-v4-shims.min.js"></script>
    <link rel="stylesheet" href="xaringan.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">




class: title-slide-custom

.pull-left65[

&lt;br&gt;&lt;br&gt;&lt;br&gt;

## FFTrees: How to create extremely simple, transparent, predictive decision algorithms for both machine learning and clinical decision applications.

&lt;br&gt;

&lt;font size = 6&gt; Dr. Nathaniel D. Phillips&lt;br&gt;&lt;br3&gt;&lt;a href="http://www.roche.com/"&gt;Roche, Personalised Health Care&lt;/a&gt;&lt;/font&gt;
&lt;br&gt;&lt;br3&gt;

&lt;font size = 5&gt;&lt;i class="fa fa-tv"&gt;&lt;/i&gt;   Slides: &lt;a href='https://ndphillips.github.io/RMedicine_2018/'&gt;https://ndphillips.github.io/RMedicine_2018/s&lt;/a&gt;&lt;/font&gt;

&lt;br&gt;

&lt;font size = 5&gt;R/Medicine, New Haven, 7 September, 2018&lt;/font&gt;

&lt;br&gt;
]

.pull-right35[

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;img src="images/heartfft.png" width="100%" style="display: block; margin: auto;" /&gt;

]

---

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

# How can one make good decisions based on complex, noisy, limited information given limited resources?

---

&lt;img src="images/three_ex_1.png" style="display: block; margin: auto;" /&gt;

---
count: false

&lt;img src="images/three_ex_2.png" style="display: block; margin: auto;" /&gt;

---
count: false

&lt;img src="images/three_ex_3.png" style="display: block; margin: auto;" /&gt;

---
count: false

&lt;img src="images/three_ex_4.png" style="display: block; margin: auto;" /&gt;

---

&lt;img src="images/cook_er_full.png" width="100%" style="display: block; margin: auto;" /&gt;


---

&lt;img src="images/er_decision_1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
count: false

&lt;img src="images/er_decision_2.png" width="100%" style="display: block; margin: auto;" /&gt;

---
count: false

&lt;img src="images/er_decision_3.png" width="100%" style="display: block; margin: auto;" /&gt;

---
count: false

&lt;img src="images/er_decision_4.png" width="100%" style="display: block; margin: auto;" /&gt;

---
count: false

&lt;img src="images/er_decision_5.png" width="100%" style="display: block; margin: auto;" /&gt;

---
count: false

&lt;img src="images/er_decision_x.png" width="100%" style="display: block; margin: auto;" /&gt;

---
count: false

&lt;img src="images/er_decision_6.png" width="100%" style="display: block; margin: auto;" /&gt;

---
count: false

&lt;img src="images/er_decision_7.png" width="100%" style="display: block; margin: auto;" /&gt;


---

.pull-left5[

### Problem

&lt;font size = 5&gt;Inconsistent decisions. Too many false-alarms&lt;/font&gt;

&lt;br&gt;

### Solution

&lt;font size = 5&gt;A &lt;font color = "blue"&gt;Fast-and-Frugal decision tree (FFT)&lt;/font&gt; developed by Green &amp; Mehr (1997)&lt;font&gt;
&lt;br&gt;

### Result
&lt;font size = 5&gt;Far fewer false-alarms than doctors&lt;font&gt;
&lt;br4&gt;

&lt;font size = 5&gt;Unlike a complex regression tool, was understood and &lt;font color = "blue"&gt;actually used&lt;/font&gt; by physicians&lt;font&gt;

&lt;br4&gt;


&gt; The best tool in the world is worthless if it isn't used.

]


.pull-right5[


&lt;img src="images/greenmehr_fft.png" width="75%" style="display: block; margin: auto;" /&gt;

&lt;font size = 3&gt;Source: Green &amp; Mehr. (1997). What alters physician's decisions to admit to the coronary care unit?&lt;/font&gt;

]


---

.pull-left4[

&lt;br&gt;&lt;br&gt;&lt;br&gt;
## What is an FFT?
&lt;br2&gt;
&lt;font size=5&gt;A &lt;font color = "blue"&gt;Fast-and-Frugal Tree&lt;/font&gt; (FFT) is a highly restricted decision tree.&lt;/font&gt;
&lt;br4&gt;
&lt;font size=5&gt;Each node in the tree must have exactly 2 branches, where 1 branch is an exit branch leading to a decision leaf.&lt;/font&gt;
&lt;br4&gt;
&lt;font size=5&gt;The final node must have 2 exit branches.&lt;/font&gt;
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;font size = 3&gt;*Martignon et al. (2003). Naive and yet enlightened: From natural frequencies to fast and frugal decision trees*&lt;/font&gt;

]


.pull-right6[

&lt;br&gt;
&lt;img src="images/fft_definition_examples.png" width="100%" style="display: block; margin: auto;" /&gt;

]


---

.pull-left4[
&lt;br&gt;&lt;br&gt;&lt;br&gt;
## Benefits of FFTs

&lt;font size=5&gt;Communication, understanding, acceptance, use&lt;/font&gt;&lt;br4&gt;
&lt;font size=5&gt;Compare to expert knowledge&lt;/font&gt;&lt;br4&gt;
&lt;font size=5&gt;Focuses on what's most important&lt;/font&gt;&lt;br4&gt;
&lt;font size=5&gt;Reduces cost&lt;/font&gt;&lt;br4&gt;
&lt;font size=5&gt;Doesn't overfit - no false sense of magical abilities&lt;/font&gt;&lt;br4&gt;
&lt;font size=5&gt;Communicates errors, transparently&lt;/font&gt;&lt;br4&gt;

]


.pull-right55[
&lt;br&gt;&lt;br&gt;

&lt;img src="images/FFTs_benefits.png" width="100%" style="display: block; margin: auto;" /&gt;

]



---

.pull-left5[

&lt;img src="images/fft_examples_images.png" width="100%" style="display: block; margin: auto;" /&gt;


]

.pull-right5[

&lt;img src="images/blank_fft_B.png" width="75%" style="display: block; margin: auto;" /&gt;

]


---

.pull-left5[

&lt;img src="images/fft_examples_images_depression_focus.png" width="100%" style="display: block; margin: auto;" /&gt;


]

.pull-right5[

### Depression FFT

&lt;img src="images/depression_fft.png" width="75%" style="display: block; margin: auto;" /&gt;

&lt;font size = 3&gt;Jenny et al. (2013). Simple rules for detecting depression.&lt;/font&gt;


]



---

.pull-left5[

&lt;img src="images/fft_examples_images_military_focus.png" width="100%" style="display: block; margin: auto;" /&gt;


]

.pull-right5[

### Miltary Checkpoint FFT
&lt;br&gt;
&lt;br&gt;
&lt;img src="images/terrorism_fft.png" width="75%" style="display: block; margin: auto;" /&gt;

&lt;font size = 3&gt;Keller &amp; Katsikopoulos. (2016). On the role of psychological heuristics in operational research.&lt;/font&gt;


]



---


.pull-left5[
&lt;br&gt;&lt;br&gt;

### FFTrees R Package
&lt;br3&gt;
&lt;font size = 5&gt;v1.3.5 on CRAN (also on GitHub)&lt;/font&gt;
&lt;br3&gt;
&lt;font size = 5&gt;A &lt;font color = "blue"&gt;simple tool&lt;/font&gt; that allows anyone to create and &lt;font color = "blue"&gt;customize&lt;/font&gt; FFTs&lt;/font&gt;
&lt;br4&gt;
&lt;font size = 5&gt;Visualize tree decisions using &lt;font color = "blue"&gt;icon arrays&lt;/font&gt;&lt;/font&gt;
&lt;br4&gt;
&lt;font size = 5&gt;Incorporate cue and outcome&lt;font color = "blue"&gt;costs&lt;/font&gt;&lt;/font&gt;
&lt;br4&gt;
&lt;font size = 5&gt;&lt;font color = "blue"&gt;Easily compare&lt;/font&gt; FFTs to other algorithms.&lt;/font&gt;

]

.pull-right5[

&lt;img src="images/FFTrees_GitHub_ss.jpg" width="75%" style="display: block; margin: auto;" /&gt;

&lt;center&gt;&lt;a href = 'https://github.com/ndphillips/FFTrees'&gt;https://github.com/ndphillips/FFTrees&lt;/a&gt;

]


---
## Ex) Heart Disease

&lt;br3&gt;

&lt;font size = 5&gt;&lt;b&gt;Data&lt;/b&gt; 150 Training cases, 153 test cases&lt;/font&gt;

&lt;br&gt;

| age| sex|cp | trestbps| chol| fbs|restecg     | thalach| exang| oldpeak|slope | ca|thal   | diagnosis|
|---:|---:|:--|--------:|----:|---:|:-----------|-------:|-----:|-------:|:-----|--:|:------|---------:|
|  63|   1|ta |      145|  233|   1|hypertrophy |     150|     0|     2.3|down  |  0|fd     |         0|
|  67|   1|a  |      160|  286|   0|hypertrophy |     108|     1|     1.5|flat  |  3|normal |         1|
|  67|   1|a  |      120|  229|   0|hypertrophy |     129|     1|     2.6|flat  |  2|rd     |         1|
|  37|   1|np |      130|  250|   0|normal      |     187|     0|     3.5|down  |  0|normal |         0|
|  41|   0|aa |      130|  204|   0|hypertrophy |     172|     0|     1.4|up    |  0|normal |         0|
|  56|   1|aa |      120|  236|   0|normal      |     178|     0|     0.8|up    |  0|normal |         0|

&lt;br&gt;

&lt;font size = 5&gt;&lt;b&gt;Goal&lt;/b&gt; Predict binary criterion (diagnosis) from a set of 13 numeric and factor features&lt;/font&gt;
&lt;br4&gt;


&lt;font size = 3&gt;Source: UCI Machine Learning Database&lt;/font&gt;



---
## 4 Steps to using FFTrees in R

.pull-left15[
&lt;br3&gt;&lt;br3&gt;
&lt;br&gt;
&lt;br&gt;
&lt;font size = 5&gt;0.Install&lt;/font&gt;
&lt;br&gt;&lt;br&gt;

&lt;font size = 5&gt;1. Load&lt;/font&gt;
&lt;br&gt;

&lt;font size = 5&gt;2. Create&lt;/font&gt;
&lt;br&gt;
&lt;br&gt;&lt;br&gt;
&lt;br&gt;&lt;br&gt;&lt;br4&gt;
&lt;font size = 5&gt;3. Print&lt;/font&gt;
&lt;br&gt;&lt;br&gt;

&lt;font size = 5&gt;4. Plot&lt;/font&gt;
&lt;br&gt;

]

.pull-right85[

&lt;br&gt;


```r
# Step 0: Install FFTrees from CRAN
install.packages("FFTrees")

# Step 1: Load FFTrees
library(FFTrees)

#  Step 2: Create the FFTrees object
heart_FFT &lt;- FFTrees(formula = diagnosis ~., # Criterion
                     data = heart.train,     # Training data
                     data.test = heart.test, # Testing data
                     main = "Heart Disease", # Optional Labels
                     decision.labels = c("Healthy", "Diseased")) 

# Step 3: Print the object
heart_FFT

# Step 4: Plot the tree and accuracy statistics
plot(heart_FFT)
```

]

---
## plot(heart_FFT, stats = FALSE)

---
count: false


## plot(heart_FFT, stats = FALSE)

.pull-left5[

&lt;img src="images/heart_fft_nostats_2.png" width="70%" style="display: block; margin: auto;" /&gt;

]

.pull-right5[
&lt;br&gt;&lt;br&gt;&lt;br&gt;
###thal
&lt;br2&gt;

&lt;font size=5&gt;Imaging test that measures blood flow to the heart&lt;/font&gt;

### cp
&lt;br2&gt;

&lt;font size=5&gt;Type of chest pain&lt;/font&gt;

### ca
&lt;br2&gt;

&lt;font size=5&gt;Number of major vessels colored by fluoroscopy&lt;/font&gt;


]
---

## plot(heart_FFT)

---
count: false

## plot(heart_FFT)

.pull-left7[

&lt;img src="images/fft_labels.png" width="80%" style="display: block; margin: auto;" /&gt;

]

.pull-right3[

&lt;br&gt;

&lt;font size = 5&gt;Dataset description&lt;/font&gt;

&lt;br&gt;&lt;br&gt;

&lt;font size = 5&gt;Tree and decisions displayed as &lt;b&gt;icon arrays&lt;/b&gt;*&lt;/font&gt;

&lt;br&gt;&lt;br&gt;&lt;br&gt;

&lt;font size = 5&gt;Aggregate classification statistics&lt;/font&gt;


&lt;br&gt;

&lt;font size = 3&gt;* Galesic, et al. (2009). Using icon arrays to communicate medical risks&lt;/font&gt;

]




---
count: false

## plot(heart_FFT)

.pull-left7[

&lt;img src="images/heart_train_roc.png" width="100%" style="display: block; margin: auto;" /&gt;

]

.pull-right3[

&lt;br&gt;

&lt;font size = 5&gt;Algorithm comparison in ROC space&lt;/font&gt;

&lt;br&gt;&lt;br&gt;

&lt;font size = 5&gt;Multiple FFTs with different error trade-offs.&lt;/font&gt;

&lt;br&gt;&lt;br&gt;&lt;br&gt;

]

---

## plot(heart_FFT, data = "test")


.pull-left7[


&lt;img src="images/heart_fft_test.png" width="80%" style="display: block; margin: auto;" /&gt;

]

.pull-right3[

&lt;br&gt;

&lt;font size = 5&gt;Easily apply tree to &lt;b&gt;new, test data&lt;/b&gt; with data = "test"&lt;/font&gt;

&lt;br&gt;&lt;br&gt;

&lt;font size = 5&gt;Look for changes in decisions, and diagnose &lt;b&gt;errors&lt;/b&gt; occur&lt;/font&gt;

&lt;br&gt;&lt;br&gt;&lt;br&gt;

&lt;font size = 5&gt;Compare prediction accuracy to other algorithms&lt;/font&gt;

]


---

## plot(heart_FFT, data = "test", tree = 7)

.pull-left7[

&lt;img src="images/heart_fft_test_tree7.png" width="80%" style="display: block; margin: auto;" /&gt;

]

.pull-right3[

&lt;br&gt;&lt;br&gt;

&lt;font size = 5&gt;Explore trees with different &lt;b&gt;exit structures&lt;/b&gt; and &lt;b&gt;error trade-offs&lt;/b&gt;&lt;/font&gt;

&lt;br&gt;&lt;br&gt;

&lt;font size = 5&gt;Tree #7 has a very low false-alarm rate but a huge number of misses&lt;/font&gt;

&lt;br&gt;&lt;br&gt;

]

---
## plot(heart_FFT, data = "test", tree = 6)

.pull-left7[

&lt;img src="images/heart_fft_test_tree6.png" width="80%" style="display: block; margin: auto;" /&gt;

]

.pull-right3[

&lt;br&gt;&lt;br&gt;

&lt;font size = 5&gt;Explore trees with different &lt;b&gt;exit structures&lt;/b&gt; and &lt;b&gt;error trade-offs&lt;/b&gt;&lt;/font&gt;

&lt;br&gt;&lt;br&gt;

&lt;font size = 5&gt;Tree #6 has very few misses but a huge number of false-alarms&gt;&lt;/font&gt;

&lt;br&gt;&lt;br&gt;
]


---


&lt;br&gt;&lt;br&gt;
&gt; # Bonus Features



---


.pull-left3[
&lt;br&gt;&lt;br&gt;
## Bonus Features
&lt;br&gt;&lt;br&gt;


&lt;font size = 5&gt;1. Missing data? No problem.&lt;/font&gt;

]


.pull-right6[
&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;img src="images/fft_missing.png" width="100%" style="display: block; margin: auto;" /&gt;


]


---

.pull-left3[
&lt;br&gt;&lt;br&gt;
## Bonus Features

&lt;br&gt;&lt;br&gt;


&lt;font size = 5&gt;1. Missing data? No problem.&lt;/font&gt;

&lt;br4&gt;

&lt;font size = 5&gt;2. Implement your own custom tree verbally.&lt;/font&gt;


]

.pull-right6[
&lt;br&gt;
&lt;img src="images/myfft_ss.png" width="90%" style="display: block; margin: auto;" /&gt;

]

---

.pull-left3[

&lt;br&gt;&lt;br&gt;
## Bonus Features

&lt;br&gt;&lt;br&gt;

&lt;font size = 5&gt;1. Missing data? No problem.&lt;/font&gt;

&lt;br4&gt;

&lt;font size = 5&gt;2. Implement your own custom tree verbally.&lt;/font&gt;

&lt;br4&gt;

&lt;font size = 5&gt;3. Minimize feature and error costs.&lt;/font&gt;

]


.pull-right6[
&lt;br&gt;&lt;br&gt;
### Heart Disease feature costs

&lt;br&gt;

|     |age  |sex  |cp   |trestbps |chol |fbs  |restecg    |ca     |thal   |
|:----|:----|:----|:----|:--------|:----|:----|:-----|:------|:------|
|cost |$1 |$1 |$1 |$1     |$7 |$5 |$16  |$101 |$103 |


&lt;font size = 5&gt; Create FFTs that &lt;i&gt;minimize&lt;/i&gt; costs&lt;/font&gt;
&lt;br4&gt;


```r
# Minimise costs
FFTrees(data = heart.train,
        cost.cues = heart.cost,        # Feature costs
        cost.outcomes = c(0, 1, 1, 0), # Outcome costs
        goal = "cost")
```




]


---

.pull-left3[

&lt;br&gt;&lt;br&gt;
## Bonus Features

&lt;br&gt;&lt;br&gt;

&lt;font size = 5&gt;1. Missing data? No problem.&lt;/font&gt;

&lt;br4&gt;

&lt;font size = 5&gt;2. Implement your own custom tree verbally.&lt;/font&gt;

&lt;br4&gt;

&lt;font size = 5&gt;3. Minimize feature and error costs.&lt;/font&gt;

]


.pull-right6[

### Cost Ignorant FFT

&lt;img src="images/cost_ignorant_fft.png" width="80%" style="display: block; margin: auto;" /&gt;

| | Cost Ignorant|Cost Minimizing |Change |
|------:|:----:|:-----:|:----:|
|     Cost / Patient|    $138|   &lt;font color = "gray"&gt;?&lt;/font&gt;   |   &lt;font color = "gray"&gt;?&lt;/font&gt; |
|     Accuracy|    81%|   &lt;font color = "gray"&gt;?&lt;/font&gt;  | &lt;font color = "gray"&gt;?&lt;/font&gt;  |

]

---

.pull-left3[

&lt;br&gt;&lt;br&gt;
## Bonus Features

&lt;br&gt;&lt;br&gt;

&lt;font size = 5&gt;1. Missing data? No problem.&lt;/font&gt;

&lt;br4&gt;

&lt;font size = 5&gt;2. Implement your own custom tree verbally.&lt;/font&gt;

&lt;br4&gt;

&lt;font size = 5&gt;3. Minimize feature and error costs.&lt;/font&gt;

]


.pull-right6[

### Cost Minimising FFT

&lt;img src="images/cost_minimising_fft.png" width="80%" style="display: block; margin: auto;" /&gt;

| | Cost Ignorant|Cost Minimizing |Change |
|------:|:----:|:-----:|:----:|
|     Cost / Patient|    $138| $2     |&lt;font color="blue"&gt;-99%&lt;/font&gt;    |
|     Accuracy|    81%|77%     |&lt;font color="red"&gt;-5%&lt;/font&gt;    |

]


---
&lt;br&gt;&lt;br&gt;
&gt; #But how well can a simple FFT actually predict data?

---

.pull-left5[

## 10 datasets from UCI ML database

&lt;img src="images/ten_datasets.png" width="100%" style="display: block; margin: auto;" /&gt;

&lt;br&gt;

&lt;font size = 5&gt;Procedure: 100 50/50 Cross validation simulations&lt;/font&gt;
&lt;br3&gt;
&lt;font size = 5&gt;Criterion: Balanced Accuracy&lt;/font&gt;
&lt;br3&gt;

`\(\Large bacc = mean(sens, spec)\)`

]

.pull-right5[
&lt;br&gt;&lt;br&gt;

| title| cases|features |base rate |
|------:|----:|:-----|:----|
|     arrhythmia|    68|280     |0.29    |
|     audiology|    226|70     |0.10    |
|     breast|    683|10     |0.35    |
|     cmc|    1,473|10    |0.35    |
|     credit|    666|16     |0.45    |
|     dermatology|   358|35     |0.31    |
|     heart|   303     |14    |0.46
|     occupancy|   17,895|6     |0.21    |
|     voting|   435     |17    |0.61 |
|     yeast|   1,484     |19    |0.16 |


]

---
.pull-left5[
&lt;br&gt;&lt;br&gt;

## Make a Prediction!
&lt;br&gt;&lt;br&gt;
&lt;h3&gt;Across 10 datasets, I am 90% confident FFTrees reached between &lt;font color='gray'&gt;HIGH&lt;/font&gt; % and &lt;font color='gray'&gt;LOW&lt;/font&gt; % of the accuracy of random forests&lt;/h2&gt;

]

.pull-right45[

&lt;img src="images/simulation_prediction_thermometer.png" width="80%" style="display: block; margin: auto;" /&gt;


]

---
### Simulation Results

&lt;br&gt;
&lt;img src="images/FFTrees_simulation_performance.png" width="100%" style="display: block; margin: auto;" /&gt;

### &gt; Simple models can be surprisingly difficult to outperform

---

.pull-left5[
&lt;br&gt;
### How you can use FFTrees

See how well a stupid simple fast-and-frugal tree can predict data

Use as a performance reference for complex algorithms

&lt;i&gt;Make decisions!&lt;/i&gt;

Communicate the basics of machine learning (accuracy, sensitivity, specificity) to non--experts


]


.pull-right5[
&lt;br&gt;&lt;br&gt;
&lt;img src="images/heart_fft_test.png" style="display: block; margin: auto;" /&gt;

]



---


class: title-slide-custom

.pull-left65[

&lt;br&gt;&lt;br&gt;&lt;br&gt;

## Create powerful, transparent decision aids with FFTrees

&lt;br&gt;

&lt;font size = 6&gt; Dr. Nathaniel D. Phillips&lt;br&gt;&lt;br3&gt;&lt;a href="http://phcanalytics.roche.com/"&gt;PD PHC Data Science&lt;/a&gt;&lt;/font&gt;
&lt;br&gt;&lt;br3&gt;

&lt;font size = 5&gt;&lt;i class="fa fa-tv"&gt;&lt;/i&gt;   Slides: &lt;a href='https://go.roche.com/BDE_FFTrees'&gt;https://go.roche.com/BDE_FFTrees&lt;/a&gt;&lt;/font&gt;

&lt;br&gt;

&lt;font size = 5&gt;Roche, Basel Data Enthusiasts and Skeptics, 9 July, 2018&lt;/font&gt;

&lt;br&gt;
]

.pull-right35[

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;img src="images/heartfft.png" width="100%" style="display: block; margin: auto;" /&gt;

]


---
# Backup Slides



---

.pull-left35[

&lt;br&gt;&lt;br&gt;
## "Fan" Algorithm

&lt;br&gt;
&lt;font size = 5&gt;1. For each feature, calculate a threshold that maximizes &lt;font color = 'red'&gt;accuracy&lt;/font&gt;&lt;/font&gt;

]

.pull-right55[
&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;font size = 5&gt;What is the best split for feature X?&lt;/font&gt;

&lt;img src="images/threshold.png" width="100%" style="display: block; margin: auto;" /&gt;


]


---


.pull-left35[
&lt;br&gt;&lt;br&gt;
## "Fan" Algorithm
&lt;br&gt;
&lt;font size = 5&gt;1. For each feature, calculate a threshold that maximizes &lt;font color = 'red'&gt;accuracy&lt;/font&gt;&lt;/font&gt;

&lt;br4&gt;

&lt;font size = 5&gt;2. Rank order features by &lt;font color = 'red'&gt;accuracy&lt;/font&gt; and select top &lt;font color = 'red'&gt;M&lt;/font&gt; features.&lt;/font&gt;

]


.pull-right55[
&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;font size = 5&gt;What are the top M features?&lt;/font&gt;
&lt;br&gt;
&lt;img src="images/selectcues.png" width="100%" style="display: block; margin: auto;" /&gt;


]



---

.pull-left35[
&lt;br&gt;&lt;br&gt;
## "Fan" Algorithm

&lt;br&gt;
&lt;font size = 5&gt;1. For each feature, calculate a threshold that maximizes &lt;font color = 'red'&gt;accuracy&lt;/font&gt;&lt;/font&gt;

&lt;br4&gt;


&lt;font size = 5&gt;2. Rank order features by &lt;font color = 'red'&gt;accuracy&lt;/font&gt; and select top &lt;font color = 'red'&gt;M&lt;/font&gt; features.&lt;/font&gt;

&lt;br4&gt;


&lt;font size = 5&gt;3. Create `\((M - 1)^2\)` trees with all possible exit structures.&lt;/font&gt;


]


.pull-right55[
&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;img src="images/fft_exits_heart_A.png" width="100%" style="display: block; margin: auto;" /&gt;


]


---
count: false


.pull-left35[

&lt;br&gt;&lt;br&gt;
## "Fan" Algorithm

&lt;br&gt;
&lt;font size = 5&gt;1. For each feature, calculate a threshold that maximizes &lt;font color = 'red'&gt;accuracy&lt;/font&gt;&lt;/font&gt;

&lt;br4&gt;


&lt;font size = 5&gt;2. Rank order features by &lt;font color = 'red'&gt;accuracy&lt;/font&gt; and select top &lt;font color = 'red'&gt;M&lt;/font&gt; features.&lt;/font&gt;

&lt;br4&gt;


&lt;font size = 5&gt;3. Create `\((M - 1)^2\)` trees with all possible exit structures.&lt;/font&gt;

]


.pull-right55[
&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;img src="images/fft_exits_heart_B.png" width="100%" style="display: block; margin: auto;" /&gt;


]



---
count: false


.pull-left35[
&lt;br&gt;&lt;br&gt;
## "Fan" Algorithm


&lt;br&gt;
&lt;font size = 5&gt;1. For each feature, calculate a threshold that maximizes &lt;font color = 'red'&gt;accuracy&lt;/font&gt;&lt;/font&gt;

&lt;br4&gt;



&lt;font size = 5&gt;2. Rank order features by &lt;font color = 'red'&gt;accuracy&lt;/font&gt; and select top &lt;font color = 'red'&gt;M&lt;/font&gt; features.&lt;/font&gt;
&lt;br4&gt;


&lt;font size = 5&gt;3. Create `\((M - 1)^2\)` trees with all possible exit structures.&lt;/font&gt;
&lt;br4&gt;

&lt;font size = 5&gt;4. Select the tree that maximizes &lt;font color = 'red'&gt;accuracy&lt;/font&gt;&lt;/font&gt;


]


.pull-right55[
&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;img src="images/fft_exits_roc_A.png" width="100%" style="display: block; margin: auto;" /&gt;

]


---
count: false


.pull-left35[

&lt;br&gt;&lt;br&gt;
## "Fan" Algorithm


&lt;br&gt;
&lt;font size = 5&gt;1. For each feature, calculate a threshold that maximizes &lt;font color = 'red'&gt;accuracy&lt;/font&gt;&lt;/font&gt;

&lt;br4&gt;



&lt;font size = 5&gt;2. Rank order features by &lt;font color = 'red'&gt;accuracy&lt;/font&gt; and select top &lt;font color = 'red'&gt;M&lt;/font&gt; features.&lt;/font&gt;
&lt;br4&gt;


&lt;font size = 5&gt;3. Create `\((M - 1)^2\)` trees with all possible exit structures.&lt;/font&gt;
&lt;br4&gt;

&lt;font size = 5&gt;4. Select the tree that maximizes &lt;font color = 'red'&gt;accuracy&lt;/font&gt;&lt;/font&gt;

]


.pull-right55[
&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;img src="images/fft_exits_roc_B.png" width="100%" style="display: block; margin: auto;" /&gt;

]


---
count: false



.pull-left35[

&lt;br&gt;&lt;br&gt;
## "Fan" Algorithm

&lt;br&gt;
&lt;font size = 5&gt;1. For each feature, calculate a threshold that maximizes &lt;font color = 'red'&gt;accuracy&lt;/font&gt;&lt;/font&gt;

&lt;br4&gt;



&lt;font size = 5&gt;2. Rank order features by &lt;font color = 'red'&gt;accuracy&lt;/font&gt; and select top &lt;font color = 'red'&gt;M&lt;/font&gt; features.&lt;/font&gt;
&lt;br4&gt;


&lt;font size = 5&gt;3. Create `\((M - 1)^2\)` trees with all possible exit structures.&lt;/font&gt;
&lt;br4&gt;

&lt;font size = 5&gt;4. Select the tree that maximizes &lt;font color = 'red'&gt;accuracy&lt;/font&gt;&lt;/font&gt;

]


.pull-right55[
&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;img src="images/fft_exits_roc_C.png" width="100%" style="display: block; margin: auto;" /&gt;

]






---

.pull-left5[
&lt;br&gt;&lt;br&gt;
## Next steps
&lt;br&gt;
### Programming

- Write in C++
- Automate cross-validation to optimize parameters
- Allow for &gt; 2 classes
- Error monitoring and error diagnosis

### Applications

- When do FFTs work well and when not?
- Compare other published regression techniques to FFTs

]

.pull-right5[
&lt;br&gt;&lt;br&gt;
&lt;img src="images/heart_fft_test.png" width="100%" style="display: block; margin: auto;" /&gt;


]


---
## Overfitting

.pull-left5[

&lt;font size=5&gt;Data = Underlying functional form (signal) + irreducible error (noise).&lt;/font&gt;
&lt;br&gt;

`\(\LARGE Y = f(x) + \epsilon\)`

&lt;br&gt;
&lt;font size=5&gt;A good model will try to approximate the true signal&lt;/font&gt;
&lt;br&gt;

`\(\LARGE E(Y - \widehat{Y})^2 = [f(X) - \widehat{f}(X)]^2 + Var(\epsilon)\)`

&lt;br&gt;
&lt;font size=5&gt;However, prediction error is a combination of bias *and* variance&lt;/font&gt;
&lt;br&gt;

`\(\large E(PredError) = Var(\hat{f}(x_{0})) + [Bias(\hat{f}(x_{0}))]^2 + Var(\epsilon)\)`

&lt;br&gt;
*James et al. (2013). An Introduction to Statistical Learning*

]


.pull-right5[

&lt;br&gt;
&lt;br&gt;
Given heavy irreducible noise, a simple model may outperform a complex one.
&lt;br&gt;

&lt;img src="images/overfitting_darts.png" width="90%" style="display: block; margin: auto;" /&gt;

]


---
## Icon Arrays


&lt;img src="images/contraceptive_iconarray.png" width="80%" style="display: block; margin: auto;" /&gt;


---
.pull-left3[

## Why Icon Arrays?

Help people quickly and easily compare relative frequencies

Much clearer than probabilities

Emphasizes absolute differences in risk rather than relative risk

&lt;b&gt;Contraceptive Pill Scare&lt;/b&gt;

Relative Risk: You're 100% more likely to develop thrombosis (a life threatening blood clot) if you take the latest contraceptive pill

Absolute Risk: Previous: 1 / 7000  versus Latest: 2 / 7000


]


.pull-right7[


&lt;img src="images/iconarray_psa_harding.jpg" width="100%" style="display: block; margin: auto;" /&gt;

]



---
.pull-left4[
&lt;br&gt;&lt;br&gt;
## When will FFTs fail?

It is not difficult to imagine datasets where FFTs will fail&lt;br&gt;

FFTs will do poorly when...

- Strong interactions
- Noisy individual predictors with strong additive performance

FFTs will do well when...

- No strong interactions
- A few individual predictors have strong performance

]


.pull-right55[

### Prediction Simulation 

Two simulated datasets (4 features each) one with a strong interaction, one without

&lt;img src="images/interaction_simulation.png" width="100%" style="display: block; margin: auto;" /&gt;

Conclusion: CART is consistently better than FFTrees when there are strong interactions

]
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
